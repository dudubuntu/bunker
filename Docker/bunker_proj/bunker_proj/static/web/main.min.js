"use strict";function form_focus(e){e.querySelectorAll('input[type="text"]').forEach(function(e){e.onfocus=function(){e.parentNode.classList.add("focus"),e.parentNode.classList.remove("_error")},e.onblur=function(){1<=e.value.length?e.parentNode.classList.add("focus"):e.parentNode.classList.remove("focus")}})}function forms(){var e=document.querySelector(".join__form"),o=document.querySelector(".create__form");form_focus(e),form_focus(o)}forms();var pages={base:!0,game:!1,create:!1,join:!1,waiting:!1},locationResolver=function(e){switch(e){case"/":case"#/create":case"#/join":case"#/waiting":case"#/game":pageActive(e)}};function checkHash(){var e=window.location.hash;if(e&&locationResolver(e),""==window.location.hash||"/"==window.location.hash){var o,n=document.querySelector(".base");for(o in pages){var t=document.querySelector(".".concat(o));t.style.display=t==n?"block":"none"}}}function pageActive(e){var o,e=e.substr(2),n=document.querySelector(".".concat(e));for(o in pages){var t=document.querySelector(".".concat(o));t.style.display=t==n?"block":"none"}}window.onload=function(){checkHash()},window.onhashchange=function(){setTimeout(function(){checkHash()},100)};var btns_back=document.querySelectorAll(".back");function wating_get(){var e="http://3.122.206.63/api/v1/game_info";var o={room_id:localStorage.getItem("room_id")};function n(){(function(t,r,e){var c=2<arguments.length&&void 0!==e?e:null;return new Promise(function(e,o){var n=new XMLHttpRequest;n.open(t,r),n.responseType="json",n.setRequestHeader("Content-Type","application/json"),n.onload=function(){(400<=n.status?o:e)(n.response)},n.onerror=function(){o(n.response)},n.send(JSON.stringify(c))})})("GET",e,o).then(function(e){return console.log(e)}).catch(function(e){console.log(e)})}console.log(localStorage.getItem("room_id")),document.querySelector(".start-game").addEventListener("click",function(e){e.preventDefault(),n()})}function form_create(){var o="http://3.122.206.63/api/v1/room_create";function n(e,r,o){var c=2<arguments.length&&void 0!==o?o:null;return new Promise(function(o,n){var t=new XMLHttpRequest;t.open(e,r),t.responseType="json",t.setRequestHeader("Content-Type","application/json"),t.onload=function(){var e;400<=t.status?n(t.response):(o(t.response),"Successfully created"==(e=t.response).message&&(window.location.hash="#/waiting",localStorage.setItem("room_id","".concat(e.room_id)),localStorage.setItem("password","".concat(e.password))))},t.onerror=function(){n(t.response)},t.send(JSON.stringify(c))})}var r={initiator:"",password:"",location:"",quantity_players:""};var t=document.querySelector(".create__form");t.addEventListener("submit",function(e){e.preventDefault(),t.querySelectorAll('input[type="text"]').forEach(function(e,o){for(var n in r)e.classList.contains(n)&&(r[n]=e.value);var t;(t=e).value="",t.parentNode.classList.remove("focus")}),n("POST",o,r).then(function(e){return console.log(e)}).catch(function(e){console.log(e)})})}function form_join(){var o="http://3.122.206.63/api/v1/room_connect";function n(t,r,e){var c=2<arguments.length&&void 0!==e?e:null;return new Promise(function(e,o){var n=new XMLHttpRequest;n.open(t,r),n.responseType="json",n.setRequestHeader("Content-Type","application/json"),n.onload=function(){400<=n.status?o(n.response):(e(n.response),"Successfully created"==n.response.message&&(window.location.hash="#/waiting"))},n.onerror=function(){o(n.response)},n.send(JSON.stringify(c))})}var r={nickname:"",password:"",room:""};var t=document.querySelector(".join__form");t.addEventListener("submit",function(e){e.preventDefault(),t.querySelectorAll('input[type="text"]').forEach(function(e,o){for(var n in r)e.classList.contains(n)&&(r[n]=e.value);var t;(t=e).value="",t.parentNode.classList.remove("focus")}),n("POST",o,r).then(function(e){return console.log(e)}).catch(function(e){console.log(e)})})}btns_back.forEach(function(e){e.onclick=function(){window.location.hash=""}}),wating_get(),form_create(),form_join();